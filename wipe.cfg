
[gcode_macro CLEAN_NOZZLE]
variable_start_x: 280
variable_start_y: -5
variable_start_z: 20
variable_wipe_dist: 60
variable_wipe_qty: 2
variable_wipe_spd: 300
variable_raise_distance: 0

gcode:
 {% if "xyz" not in printer.toolhead.homed_axes %}
   G28
 {% endif %}
 
 G90                                            ; absolute positioning
 ## Move nozzle to start position
 G1 X146 Y-5 F8000
 G1 X{start_x} Y{start_y} F8500

 ## Wipe nozzle

 {% for wipes in range(1, (wipe_qty + 1)) %}
   G1 X{start_x + wipe_dist} Y{start_y} F{wipe_spd * 60}
   G1 X{start_x} F{wipe_spd * 60}
   G1 X{start_x + wipe_dist} Y{start_y + 2} F{wipe_spd * 60}
   G1 X{start_x} F{wipe_spd * 60}
   G1 X{start_x + wipe_dist} Y{start_y - 2} F{wipe_spd * 60}
   G1 X{start_x} F{wipe_spd * 60}
   G1 X{start_x - 4 + wipe_dist} Y{start_y - 4} F{wipe_spd * 60}
   G1 X{start_x} F{wipe_spd * 60}
 {% endfor %}

 G1 X250 Y-15 F8000
 G1 X270 Y-08 F8000
 G1 X270 Y-15 F8000
 G1 X280 Y-08 F8000
 G1 X280 Y-15 F8000
 G1 X290 Y-08 F8000
 G1 X290 Y-15 F8000
 G1 X300 Y-08 F8000
 G1 X300 Y-15 F8000
 G1 X310 Y-08 F8000
 G1 X310 Y-15 F8000
 G1 X320 Y-08 F8000
 G1 X320 Y-15 F8000
 G1 X330 Y-08 F8000
 G1 X330 Y-15 F8000
 G1 X340 Y-08 F8000
 G1 X340 Y-15 F8000
 G1 X330 Y-08 F8000
 G1 X330 Y-15 F8000
 G1 X320 Y-08 F8000
 G1 X320 Y-15 F8000
 G1 X310 Y-08 F8000
 G1 X310 Y-15 F8000
 G1 X300 Y-08 F8000
 G1 X300 Y-15 F8000
 G1 X290 Y-08 F8000
 G1 X290 Y-15 F8000
 G1 X280 Y-08 F8000
 G1 X280 Y-15 F8000
 G1 X270 Y-08 F8000
 G1 X270 Y-15 F8000
 G1 X250 Y-08 F8000
 G1 X270 Y-08 F8000


 G1 X146 Y-5
 